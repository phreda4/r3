| big 8x8 font
| PHREDA 2025
^r3/lib/mem.r3
^r3/lib/console.r3

#font8x8 (
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 0
%11110000 %11110000 %11110000 %11100000 %00000000 %00000000 %00000000 %00000000
%00001111 %00001111 %00001111 %00000111 %00000000 %00000000 %00000000 %00000000
%11111111 %11111111 %11111111 %11111111 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000111 %00001111 %00001111 %00001111
%11110000 %11110000 %11110000 %11100000 %00000111 %00001111 %00001111 %00001111 | 5
%00001111 %00001111 %00001111 %00001111 %00001111 %00001111 %00001111 %00001111 | 6
%00000000 %00000000 %00000000 %00000000 %11100000 %11110000 %11110000 %11110000 | 7
%00000000 %00000000 %00000000 %11111111 %11111111 %00000000 %00000000 %00000000 | 8
%00011000 %00011000 %00011000 %00011000 %00011000 %00011000 %00011000 %00011000 | 9
%00011000 %00011000 %00011000 %00011111 %00001111 %00000000 %00000000 %00000000 | 10
%00011000 %00011000 %00011000 %11111000 %11110000 %00000000 %00000000 %00000000 | 11
%00000000 %00000000 %00000000 %00001111 %00011111 %00011000 %00011000 %00011000 | 12
%00000000 %00000000 %00000000 %11110000 %11111000 %00011000 %00011000 %00011000 | 13
%00011000 %00011000 %00011000 %11111111 %11111111 %00011000 %00011000 %00011000 | 14
%01010101 %10101010 %01010101 %10101010 %01010101 %10101010 %01010101 %10101010 | 15
%00000000 %01100000 %01111000 %01111110 %01111110 %01111000 %01100000 %00000000 | 16
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 17
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 18
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 19
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 20
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 21
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 22
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 23
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 24
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 25
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 30
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 32
%00000000 %00010000 %00010000 %00010000 %00010000 %00000000 %00010000 %00000000
%00000000 %00100100 %00100100 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00100100 %01111110 %00100100 %00100100 %01111110 %00100100 %00000000 | 35 #
%00000000 %00001000 %00111110 %00101000 %00111110 %00001010 %00111110 %00001000
%00000000 %01100010 %01100100 %00001000 %00010000 %00100110 %01000110 %00000000
%00000000 %00010000 %00101000 %00010000 %00101010 %01000100 %00111010 %00000000
%00000000 %00001000 %00010000 %00000000 %00000000 %00000000 %00000000 %00000000 
%00000100 %00001000 %00010000 %00010000 %00010000 %00010000 %00001000 %00000100 | 40 (
%00100000 %00010000 %00001000 %00001000 %00001000 %00001000 %00010000 %00100000 |)
%00000000 %00000000 %00010100 %00001000 %00111110 %00001000 %00010100 %00000000 |*
%00000000 %00000000 %00001000 %00001000 %00111110 %00001000 %00001000 %00000000 |+
%00000000 %00000000 %00000000 %00000000 %00000000 %00001000 %00001000 %00010000 |,
%00000000 %00000000 %00000000 %00000000 %00111110 %00000000 %00000000 %00000000 | 45 -
%00000000 %00000000 %00000000 %00000000 %00000000 %00011000 %00011000 %00000000 | .
%00000000 %00000000 %00000010 %00000100 %00001000 %00010000 %00100000 %00000000 | /
%00000000 %00111100 %01000110 %01001010 %01010010 %01100010 %00111100 %00000000 | 0
%00000000 %00011000 %00101000 %00001000 %00001000 %00001000 %00111110 %00000000 
%00000000 %00111100 %01000010 %00000010 %00111100 %01000000 %01111110 %00000000 | 50 2
%00000000 %00111100 %01000010 %00001100 %00000010 %01000010 %00111100 %00000000 
%00000000 %00001000 %00011000 %00101000 %01001000 %01111110 %00001000 %00000000 
%00000000 %01111110 %01000000 %01111100 %00000010 %01000010 %00111100 %00000000 
%00000000 %00111100 %01000000 %01111100 %01000010 %01000010 %00111100 %00000000 
%00000000 %01111110 %00000010 %00000100 %00001000 %00010000 %00010000 %00000000 | 55 7
%00000000 %00111100 %01000010 %00111100 %01000010 %01000010 %00111100 %00000000 
%00000000 %00111100 %01000010 %01000010 %00111110 %00000010 %00111100 %00000000 
%00000000 %00000000 %00000000 %00010000 %00000000 %00000000 %00010000 %00000000 
%00000000 %00000000 %00010000 %00000000 %00000000 %00010000 %00010000 %00100000 
%00000000 %00000000 %00000100 %00001000 %00010000 %00001000 %00000100 %00000000 | 60 <
%00000000 %00000000 %00000000 %00111110 %00000000 %00111110 %00000000 %00000000 
%00000000 %00000000 %00010000 %00001000 %00000100 %00001000 %00010000 %00000000 
%00000000 %00111100 %01000010 %00000100 %00001000 %00000000 %00001000 %00000000 
%00000000 %00111100 %01001010 %01010110 %01011110 %01000000 %00111100 %00000000 
%00000000 %00111100 %01000010 %01000010 %01111110 %01000010 %01000010 %00000000 | 65 A
%00000000 %01111100 %01000010 %01111100 %01000010 %01000010 %01111100 %00000000
%00000000 %00111100 %01000010 %01000000 %01000000 %01000010 %00111100 %00000000
%00000000 %01111000 %01000100 %01000010 %01000010 %01000100 %01111000 %00000000 
%00000000 %01111110 %01000000 %01111100 %01000000 %01000000 %01111110 %00000000 
%00000000 %01111110 %01000000 %01111100 %01000000 %01000000 %01000000 %00000000 | 70 F
%00000000 %00111100 %01000010 %01000000 %01001110 %01000010 %00111100 %00000000 
%00000000 %01000010 %01000010 %01111110 %01000010 %01000010 %01000010 %00000000 
%00000000 %00111110 %00001000 %00001000 %00001000 %00001000 %00111110 %00000000 
%00000000 %00000010 %00000010 %00000010 %01000010 %01000010 %00111100 %00000000 
%00000000 %01000100 %01001000 %01110000 %01001000 %01000100 %01000010 %00000000 | 75 K
%00000000 %01000000 %01000000 %01000000 %01000000 %01000000 %01111110 %00000000
%00000000 %01000010 %01100110 %01011010 %01000010 %01000010 %01000010 %00000000 
%00000000 %01000010 %01100010 %01010010 %01001010 %01000110 %01000010 %00000000
%00000000 %00111100 %01000010 %01000010 %01000010 %01000010 %00111100 %00000000 
%00000000 %01111100 %01000010 %01000010 %01111100 %01000000 %01000000 %00000000 | 80 P
%00000000 %00111100 %01000010 %01000010 %01010010 %01001010 %00111100 %00000000 
%00000000 %01111100 %01000010 %01000010 %01111100 %01000100 %01000010 %00000000
%00000000 %00111100 %01000000 %00111100 %00000010 %01000010 %00111100 %00000000 
%00000000 %11111110 %00010000 %00010000 %00010000 %00010000 %00010000 %00000000
%00000000 %01000010 %01000010 %01000010 %01000010 %01000010 %00111100 %00000000 | 85 U
%00000000 %01000010 %01000010 %01000010 %01000010 %00100100 %00011000 %00000000
%00000000 %01000010 %01000010 %01000010 %01000010 %01011010 %00100100 %00000000 
%00000000 %01000010 %00100100 %00011000 %00011000 %00100100 %01000010 %00000000
%00000000 %10000010 %01000100 %00101000 %00010000 %00010000 %00010000 %00000000 
%00000000 %01111110 %00000100 %00001000 %00010000 %00100000 %01111110 %00000000 | 90 Z
%00000000 %00001110 %00001000 %00001000 %00001000 %00001000 %00001110 %00000000 
%00000000 %00000000 %01000000 %00100000 %00010000 %00001000 %00000100 %00000000 
%00000000 %01110000 %00010000 %00010000 %00010000 %00010000 %01110000 %00000000 
%00000000 %00010000 %00111000 %01010100 %00010000 %00010000 %00010000 %00000000 
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %11111111 | 95 _
%00000000 %00011100 %00100010 %01111000 %00100000 %00100000 %01111110 %00000000 
%00000000 %00000000 %00111000 %00000100 %00111100 %01000100 %00111100 %00000000 
%00000000 %00100000 %00100000 %00111100 %00100010 %00100010 %00111100 %00000000 
%00000000 %00000000 %00011100 %00100000 %00100000 %00100000 %00011100 %00000000 
%00000000 %00000100 %00000100 %00111100 %01000100 %01000100 %00111100 %00000000 |100 d
%00000000 %00000000 %00111000 %01000100 %01111000 %01000000 %00111100 %00000000 
%00000000 %00001100 %00010000 %00011000 %00010000 %00010000 %00010000 %00000000 
%00000000 %00000000 %00111100 %01000100 %01000100 %00111100 %00000100 %00111000 
%00000000 %01000000 %01000000 %01111000 %01000100 %01000100 %01000100 %00000000 
%00000000 %00010000 %00000000 %00110000 %00010000 %00010000 %00111000 %00000000 | 105 i
%00000000 %00000100 %00000000 %00000100 %00000100 %00000100 %00100100 %00011000 
%00000000 %00100000 %00101000 %00110000 %00110000 %00101000 %00100100 %00000000
%00000000 %00010000 %00010000 %00010000 %00010000 %00010000 %00001100 %00000000 
%00000000 %00000000 %01101000 %01010100 %01010100 %01010100 %01010100 %00000000 
%00000000 %00000000 %01111000 %01000100 %01000100 %01000100 %01000100 %00000000 | 110 n
%00000000 %00000000 %00111000 %01000100 %01000100 %01000100 %00111000 %00000000
%00000000 %00000000 %01111000 %01000100 %01000100 %01111000 %01000000 %01000000 
%00000000 %00000000 %00111100 %01000100 %01000100 %00111100 %00000100 %00000110 
%00000000 %00000000 %00011100 %00100000 %00100000 %00100000 %00100000 %00000000 
%00000000 %00000000 %00111000 %01000000 %00111000 %00000100 %01111000 %00000000 | 115 s
%00000000 %00010000 %00111000 %00010000 %00010000 %00010000 %00001100 %00000000
%00000000 %00000000 %01000100 %01000100 %01000100 %01000100 %00111000 %00000000
%00000000 %00000000 %01000100 %01000100 %00101000 %00101000 %00010000 %00000000
%00000000 %00000000 %01000100 %01010100 %01010100 %01010100 %00101000 %00000000
%00000000 %00000000 %01000100 %00101000 %00010000 %00101000 %01000100 %00000000 | 120 x
%00000000 %00000000 %01000100 %01000100 %01000100 %00111100 %00000100 %00111000 | y
%00000000 %00000000 %01111100 %00001000 %00010000 %00100000 %01111100 %00000000 | z
%00000000 %00001110 %00001000 %00110000 %00001000 %00001000 %00001110 %00000000 | {
%00000000 %00001000 %00001000 %00001000 %00001000 %00001000 %00001000 %00000000 | |
%00000000 %01110000 %00010000 %00001100 %00010000 %00010000 %01110000 %00000000 | 125 }
%00000000 %00010100 %00101000 %00000000 %00000000 %00000000 %00000000 %00000000 ) | ~

#font8x8a (
	 $00 $36 $7F $7F $3E $1C $08 $00  | 0
     $18 $18 $18 $1F $1F $18 $18 $18  | 1
     $03 $03 $03 $03 $03 $03 $03 $03  | 2
     $18 $18 $18 $F8 $F8 $00 $00 $00  | 3
     $18 $18 $18 $F8 $F8 $18 $18 $18  | 4
     $00 $00 $00 $F8 $F8 $18 $18 $18  | 5
     $03 $07 $0E $1C $38 $70 $E0 $C0  | 6
     $C0 $E0 $70 $38 $1C $0E $07 $03  | 7
     $01 $03 $07 $0F $1F $3F $7F $FF  | 8
     $00 $00 $00 $00 $0F $0F $0F $0F  | 9
     $80 $C0 $E0 $F0 $F8 $FC $FE $FF  | 10
     $0F $0F $0F $0F $00 $00 $00 $00  | 11
     $F0 $F0 $F0 $F0 $00 $00 $00 $00  | 12
     $FF $FF $00 $00 $00 $00 $00 $00  | 13
     $00 $00 $00 $00 $00 $00 $FF $FF  | 14
     $00 $00 $00 $00 $F0 $F0 $F0 $F0  | 15
     $00 $1C $1C $77 $77 $08 $1C $00  | 16
     $00 $00 $00 $1F $1F $18 $18 $18  | 17
     $00 $00 $00 $FF $FF $00 $00 $00  | 18
     $18 $18 $18 $FF $FF $18 $18 $18  | 19
     $00 $00 $3C $7E $7E $7E $3C $00  | 20
     $00 $00 $00 $00 $FF $FF $FF $FF  | 21
     $C0 $C0 $C0 $C0 $C0 $C0 $C0 $C0  | 22
     $00 $00 $00 $FF $FF $18 $18 $18  | 23
     $18 $18 $18 $FF $FF $00 $00 $00  | 24
     $F0 $F0 $F0 $F0 $F0 $F0 $F0 $F0  | 25
     $18 $18 $18 $1F $1F $00 $00 $00  | 26
     $78 $60 $78 $60 $7E $18 $1E $00  | 27
     $00 $18 $3C $7E $18 $18 $18 $00  | 28
     $00 $18 $18 $18 $7E $3C $18 $00  | 29
     $00 $18 $30 $7E $30 $18 $00 $00  | 30
     $00 $18 $0C $7E $0C $18 $00 $00  | 31
     $00 $00 $00 $00 $00 $00 $00 $00  | 32
     $00 $18 $18 $18 $18 $00 $18 $00  | 33
     $00 $66 $66 $66 $00 $00 $00 $00  | 34
     $00 $66 $FF $66 $66 $FF $66 $00  | 35
     $18 $3E $60 $3C $06 $7C $18 $00  | 36
     $00 $66 $6C $18 $30 $66 $46 $00  | 37
     $1C $36 $1C $38 $6F $66 $3B $00  | 38
     $00 $18 $18 $18 $00 $00 $00 $00  | 39
     $00 $0E $1C $18 $18 $1C $0E $00  | 40
     $00 $70 $38 $18 $18 $38 $70 $00  | 41
     $00 $66 $3C $FF $3C $66 $00 $00  | 42
     $00 $18 $18 $7E $18 $18 $00 $00  | 43
     $00 $00 $00 $00 $00 $18 $18 $30  | 44
     $00 $00 $00 $7E $00 $00 $00 $00  | 45
     $00 $00 $00 $00 $00 $18 $18 $00  | 46
     $00 $06 $0C $18 $30 $60 $40 $00  | 47
     $00 $3C $66 $6E $76 $66 $3C $00  | 48
     $00 $18 $38 $18 $18 $18 $7E $00  | 49
     $00 $3C $66 $0C $18 $30 $7E $00  | 50
     $00 $7E $0C $18 $0C $66 $3C $00  | 51
     $00 $0C $1C $3C $6C $7E $0C $00  | 52
     $00 $7E $60 $7C $06 $66 $3C $00  | 53
     $00 $3C $60 $7C $66 $66 $3C $00  | 54
     $00 $7E $06 $0C $18 $30 $30 $00  | 55
     $00 $3C $66 $3C $66 $66 $3C $00  | 56
     $00 $3C $66 $3E $06 $0C $38 $00  | 57
     $00 $00 $18 $18 $00 $18 $18 $00  | 58
     $00 $00 $18 $18 $00 $18 $18 $30  | 59
     $06 $0C $18 $30 $18 $0C $06 $00  | 60
     $00 $00 $7E $00 $00 $7E $00 $00  | 61
     $60 $30 $18 $0C $18 $30 $60 $00  | 62
     $00 $3C $66 $0C $18 $00 $18 $00  | 63
     $00 $3C $66 $6E $6E $60 $3E $00  | 64
     $00 $18 $3C $66 $66 $7E $66 $00  | 65
     $00 $7C $66 $7C $66 $66 $7C $00  | 66
     $00 $3C $66 $60 $60 $66 $3C $00  | 67
     $00 $78 $6C $66 $66 $6C $78 $00  | 68
     $00 $7E $60 $7C $60 $60 $7E $00  | 69
     $00 $7E $60 $7C $60 $60 $60 $00  | 70
     $00 $3E $60 $60 $6E $66 $3E $00  | 71
     $00 $66 $66 $7E $66 $66 $66 $00  | 72
     $00 $7E $18 $18 $18 $18 $7E $00  | 73
     $00 $0E $06 $06 $06 $66 $3C $00  | 74
     $00 $66 $6C $78 $78 $6C $66 $00  | 75
     $00 $60 $60 $60 $60 $60 $7E $00  | 76
     $00 $63 $77 $7F $6B $63 $63 $00  | 77
     $00 $66 $76 $7E $7E $6E $66 $00  | 78
     $00 $3C $66 $66 $66 $66 $3C $00  | 79
     $00 $7C $66 $66 $7C $60 $60 $00  | 80
     $00 $3C $66 $66 $66 $6C $36 $00  | 81
     $00 $7C $66 $66 $7C $6C $66 $00  | 82
     $00 $3C $60 $3C $06 $06 $3C $00  | 83
     $00 $7E $18 $18 $18 $18 $18 $00  | 84
     $00 $66 $66 $66 $66 $66 $7E $00  | 85
     $00 $66 $66 $66 $66 $3C $18 $00  | 86
     $00 $63 $63 $6B $7F $77 $63 $00  | 87
     $00 $66 $66 $3C $3C $66 $66 $00  | 88
     $00 $66 $66 $3C $18 $18 $18 $00  | 89
     $00 $7E $0C $18 $30 $60 $7E $00  | 90
     $00 $1E $18 $18 $18 $18 $1E $00  | 91
     $00 $40 $60 $30 $18 $0C $06 $00  | 92
     $00 $78 $18 $18 $18 $18 $78 $00  | 93
     $00 $08 $1C $36 $63 $00 $00 $00  | 94
     $00 $00 $00 $00 $00 $00 $FF $00  | 95
     $00 $18 $3C $7E $7E $3C $18 $00  | 96
     $00 $00 $3C $06 $3E $66 $3E $00  | 97
     $00 $60 $60 $7C $66 $66 $7C $00  | 98
     $00 $00 $3C $60 $60 $60 $3C $00  | 99
     $00 $06 $06 $3E $66 $66 $3E $00  | 100
     $00 $00 $3C $66 $7E $60 $3C $00  | 101
     $00 $0E $18 $3E $18 $18 $18 $00  | 102
     $00 $00 $3E $66 $66 $3E $06 $7C  | 103
     $00 $60 $60 $7C $66 $66 $66 $00  | 104
     $00 $18 $00 $38 $18 $18 $3C $00  | 105
     $00 $06 $00 $06 $06 $06 $06 $3C  | 106
     $00 $60 $60 $6C $78 $6C $66 $00  | 107
     $00 $38 $18 $18 $18 $18 $3C $00  | 108
     $00 $00 $66 $7F $7F $6B $63 $00  | 109
     $00 $00 $7C $66 $66 $66 $66 $00  | 110
     $00 $00 $3C $66 $66 $66 $3C $00  | 111
     $00 $00 $7C $66 $66 $7C $60 $60  | 112
     $00 $00 $3E $66 $66 $3E $06 $06  | 113
     $00 $00 $7C $66 $60 $60 $60 $00  | 114
     $00 $00 $3E $60 $3C $06 $7C $00  | 115
     $00 $18 $7E $18 $18 $18 $0E $00  | 116
     $00 $00 $66 $66 $66 $66 $3E $00  | 117
     $00 $00 $66 $66 $66 $3C $18 $00  | 118
     $00 $00 $63 $6B $7F $3E $36 $00  | 119
     $00 $00 $66 $3C $18 $3C $66 $00  | 120
     $00 $00 $66 $66 $66 $3E $0C $78  | 121
     $00 $00 $7E $0C $18 $30 $7E $00  | 122
     $00 $18 $3C $7E $7E $18 $3C $00  | 123
     $18 $18 $18 $18 $18 $18 $18 $18  | 124
     $00 $7E $78 $7C $6E $66 $06 $00  | 125
     $08 $18 $38 $78 $38 $18 $08 $00  | 126
     $10 $18 $1C $1E $1C $18 $10 $00  | 127
)

#xc #yc
:bat	'yc ! 'xc ! ;
:bc		and? ( "█" .write ; ) 32 .emit ;
	
:bigline | byte --
	$80 ( 1? over bc 2/ ) 2drop ;
	
:bigemit | ascii --
	$7f and 3 << 'font8x8 + >a
	0 ( 8 <?
		xc yc pick2 + .at
		ca@+ bigline
		1+ ) drop 
	7 'xc +! ;

:bprint
	( c@+ 1? bigemit ) 2drop ;
	
:bprinta
	( c@+ 1? bigemit ) 2drop ;

:bigemita | ascii --
	$7f and 3 << 'font8x8a + >a
	0 ( 8 <?
		xc yc pick2 + .at
		ca@+ bigline
		1+ ) drop 
	8 'xc +! ;
:bprinta
	( c@+ 1? bigemita ) 2drop ;
	
	
|------------------ convert data
#fontsx

| $8080 => $c000
:bigline | v -- v
	0 >b
	8 ( 1? 1-
		2dup >> | 0101
		dup $0100 and 7 >> swap $1 and or | 0003
		over 2* << 
		b+
		) drop 
	b> pick2 16 * << a+
	;
		
:conv | v -- vc
	ab[
	0 >a
	0 ( 4 <?
		swap bigline 16 >>> swap
		1+ ) 2drop  
	a> 
	]ba ;
		
:makefit	
	here dup 'fontsx ! >b
	'font8x8 >a
	128 ( 1? 1-
		a@+	conv b!+
		) drop 
	b> 'here ! ;

|-- for diferent sizes utf
#t00 " " #t01 "▀" #t10 "▄" #t11 "█"	
#t 't00 't01 't10 't11
:bc 3 << 't + @ .write ;

|--- 3bytes utf-8 align to 4
#tx " " ( 0 0 ) "▀" "▄" "█"	 | 3bytes utf-char
:bc 2 << 'tx + .write ;
	
:bigline | val -- val
	14 ( 1? 2dup >> $3 and bc 2 - ) drop ;
	
:bigemit | ascii --
	$7f and 3 << fontsx	+ @
	0 ( 4 <?
		xc yc pick2 + .at
		swap bigline 16 >> swap
		1+ ) 2drop 
	7 'xc +! ;

:xprint
	( c@+ 1? bigemit ) 2drop ;
	
:savefit	
	mark
	"#f8x8 " ,print ,cr
	fontsx >a
	0 ( 128 <? 1+
		a@+ "$%h " ,print 
		$3 nand? ( ,cr ) 
		) drop
	"f8x8.r3" savemem
	empty
	;

:makefita	
	here dup 'fontsx ! >b
	'font8x8a >a
	128 ( 1? 1-
		a@+	conv b!+
		) drop 
	b> 'here ! ;
	
:savefita
	makefita
	mark
	"#f8x8a " ,print ,cr
	fontsx >a
	0 ( 128 <? 1+
		a@+ "$%h " ,print 
		$3 nand? ( ,cr ) 
		) drop
	"f8x8a.r3" savemem
	empty
	;
|--------------- UTF-com
#utfex "─ │ ┌ ┐ └ ┘ ├ ┤ ┬ ┴ ┼ ═ ║ ╔ ╗ ╚ ╝ ╬ █ ▌ ▀ ▄ ░ ▒ ▓ ■ □ ▲ ▼ ● ○ — "

:main
	makefit
	.cls
	2 2 bat .green
	"R3 big" bprint
	40 2 bat
	"R3 big" bprinta
	
	2 10 bat .bred .white
	"R3 text" xprint
	.reset 
	.cr	.cr
	'utfex .write
	mark
	"│" ,s 27 ,c "[B" ,s 27 ,c "[D" ,s
	,eol
	empty
	here ( c@+ 1? $ff and "$%h " .print ) 2drop
	.flush
	
	|savefit | save file with converted data
	|savefita | save file with converted data
	waitesc
	;
	
: main .free ;