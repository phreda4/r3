| big 8x8 font
^r3/lib/mem.r3
^./console.r3

#font8x8 (
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 0
%11110000 %11110000 %11110000 %11100000 %00000000 %00000000 %00000000 %00000000
%00001111 %00001111 %00001111 %00000111 %00000000 %00000000 %00000000 %00000000
%11111111 %11111111 %11111111 %11111111 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000111 %00001111 %00001111 %00001111
%11110000 %11110000 %11110000 %11100000 %00000111 %00001111 %00001111 %00001111 | 5
%00001111 %00001111 %00001111 %00001111 %00001111 %00001111 %00001111 %00001111 | 6
%00000000 %00000000 %00000000 %00000000 %11100000 %11110000 %11110000 %11110000 | 7
%00000000 %00000000 %00000000 %11111111 %11111111 %00000000 %00000000 %00000000 | 8
%00011000 %00011000 %00011000 %00011000 %00011000 %00011000 %00011000 %00011000 | 9
%00011000 %00011000 %00011000 %00011111 %00001111 %00000000 %00000000 %00000000 | 10
%00011000 %00011000 %00011000 %11111000 %11110000 %00000000 %00000000 %00000000 | 11
%00000000 %00000000 %00000000 %00001111 %00011111 %00011000 %00011000 %00011000 | 12
%00000000 %00000000 %00000000 %11110000 %11111000 %00011000 %00011000 %00011000 | 13
%00011000 %00011000 %00011000 %11111111 %11111111 %00011000 %00011000 %00011000 | 14
%01010101 %10101010 %01010101 %10101010 %01010101 %10101010 %01010101 %10101010 | 15
%00000000 %01100000 %01111000 %01111110 %01111110 %01111000 %01100000 %00000000 | 16
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 17
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 18
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 19
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 20
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 21
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 22
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 23
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 24
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 25
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 30
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 | 32
%00000000 %00010000 %00010000 %00010000 %00010000 %00000000 %00010000 %00000000
%00000000 %00100100 %00100100 %00000000 %00000000 %00000000 %00000000 %00000000
%00000000 %00100100 %01111110 %00100100 %00100100 %01111110 %00100100 %00000000 | 35 #
%00000000 %00001000 %00111110 %00101000 %00111110 %00001010 %00111110 %00001000
%00000000 %01100010 %01100100 %00001000 %00010000 %00100110 %01000110 %00000000
%00000000 %00010000 %00101000 %00010000 %00101010 %01000100 %00111010 %00000000
%00000000 %00001000 %00010000 %00000000 %00000000 %00000000 %00000000 %00000000 
%00000100 %00001000 %00010000 %00010000 %00010000 %00010000 %00001000 %00000100 | 40 (
%00100000 %00010000 %00001000 %00001000 %00001000 %00001000 %00010000 %00100000 |)
%00000000 %00000000 %00010100 %00001000 %00111110 %00001000 %00010100 %00000000 |*
%00000000 %00000000 %00001000 %00001000 %00111110 %00001000 %00001000 %00000000 |+
%00000000 %00000000 %00000000 %00000000 %00000000 %00001000 %00001000 %00010000 |,
%00000000 %00000000 %00000000 %00000000 %00111110 %00000000 %00000000 %00000000 | 45 -
%00000000 %00000000 %00000000 %00000000 %00000000 %00011000 %00011000 %00000000 | .
%00000000 %00000000 %00000010 %00000100 %00001000 %00010000 %00100000 %00000000 | /
%00000000 %00111100 %01000110 %01001010 %01010010 %01100010 %00111100 %00000000 | 0
%00000000 %00011000 %00101000 %00001000 %00001000 %00001000 %00111110 %00000000 
%00000000 %00111100 %01000010 %00000010 %00111100 %01000000 %01111110 %00000000 | 50 2
%00000000 %00111100 %01000010 %00001100 %00000010 %01000010 %00111100 %00000000 
%00000000 %00001000 %00011000 %00101000 %01001000 %01111110 %00001000 %00000000 
%00000000 %01111110 %01000000 %01111100 %00000010 %01000010 %00111100 %00000000 
%00000000 %00111100 %01000000 %01111100 %01000010 %01000010 %00111100 %00000000 
%00000000 %01111110 %00000010 %00000100 %00001000 %00010000 %00010000 %00000000 | 55 7
%00000000 %00111100 %01000010 %00111100 %01000010 %01000010 %00111100 %00000000 
%00000000 %00111100 %01000010 %01000010 %00111110 %00000010 %00111100 %00000000 
%00000000 %00000000 %00000000 %00010000 %00000000 %00000000 %00010000 %00000000 
%00000000 %00000000 %00010000 %00000000 %00000000 %00010000 %00010000 %00100000 
%00000000 %00000000 %00000100 %00001000 %00010000 %00001000 %00000100 %00000000 | 60 <
%00000000 %00000000 %00000000 %00111110 %00000000 %00111110 %00000000 %00000000 
%00000000 %00000000 %00010000 %00001000 %00000100 %00001000 %00010000 %00000000 
%00000000 %00111100 %01000010 %00000100 %00001000 %00000000 %00001000 %00000000 
%00000000 %00111100 %01001010 %01010110 %01011110 %01000000 %00111100 %00000000 
%00000000 %00111100 %01000010 %01000010 %01111110 %01000010 %01000010 %00000000 | 65 A
%00000000 %01111100 %01000010 %01111100 %01000010 %01000010 %01111100 %00000000
%00000000 %00111100 %01000010 %01000000 %01000000 %01000010 %00111100 %00000000
%00000000 %01111000 %01000100 %01000010 %01000010 %01000100 %01111000 %00000000 
%00000000 %01111110 %01000000 %01111100 %01000000 %01000000 %01111110 %00000000 
%00000000 %01111110 %01000000 %01111100 %01000000 %01000000 %01000000 %00000000 | 70 F
%00000000 %00111100 %01000010 %01000000 %01001110 %01000010 %00111100 %00000000 
%00000000 %01000010 %01000010 %01111110 %01000010 %01000010 %01000010 %00000000 
%00000000 %00111110 %00001000 %00001000 %00001000 %00001000 %00111110 %00000000 
%00000000 %00000010 %00000010 %00000010 %01000010 %01000010 %00111100 %00000000 
%00000000 %01000100 %01001000 %01110000 %01001000 %01000100 %01000010 %00000000 | 75 K
%00000000 %01000000 %01000000 %01000000 %01000000 %01000000 %01111110 %00000000
%00000000 %01000010 %01100110 %01011010 %01000010 %01000010 %01000010 %00000000 
%00000000 %01000010 %01100010 %01010010 %01001010 %01000110 %01000010 %00000000
%00000000 %00111100 %01000010 %01000010 %01000010 %01000010 %00111100 %00000000 
%00000000 %01111100 %01000010 %01000010 %01111100 %01000000 %01000000 %00000000 | 80 P
%00000000 %00111100 %01000010 %01000010 %01010010 %01001010 %00111100 %00000000 
%00000000 %01111100 %01000010 %01000010 %01111100 %01000100 %01000010 %00000000
%00000000 %00111100 %01000000 %00111100 %00000010 %01000010 %00111100 %00000000 
%00000000 %11111110 %00010000 %00010000 %00010000 %00010000 %00010000 %00000000
%00000000 %01000010 %01000010 %01000010 %01000010 %01000010 %00111100 %00000000 | 85 U
%00000000 %01000010 %01000010 %01000010 %01000010 %00100100 %00011000 %00000000
%00000000 %01000010 %01000010 %01000010 %01000010 %01011010 %00100100 %00000000 
%00000000 %01000010 %00100100 %00011000 %00011000 %00100100 %01000010 %00000000
%00000000 %10000010 %01000100 %00101000 %00010000 %00010000 %00010000 %00000000 
%00000000 %01111110 %00000100 %00001000 %00010000 %00100000 %01111110 %00000000 | 90 Z
%00000000 %00001110 %00001000 %00001000 %00001000 %00001000 %00001110 %00000000 
%00000000 %00000000 %01000000 %00100000 %00010000 %00001000 %00000100 %00000000 
%00000000 %01110000 %00010000 %00010000 %00010000 %00010000 %01110000 %00000000 
%00000000 %00010000 %00111000 %01010100 %00010000 %00010000 %00010000 %00000000 
%00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %00000000 %11111111 | 95 _
%00000000 %00011100 %00100010 %01111000 %00100000 %00100000 %01111110 %00000000 
%00000000 %00000000 %00111000 %00000100 %00111100 %01000100 %00111100 %00000000 
%00000000 %00100000 %00100000 %00111100 %00100010 %00100010 %00111100 %00000000 
%00000000 %00000000 %00011100 %00100000 %00100000 %00100000 %00011100 %00000000 
%00000000 %00000100 %00000100 %00111100 %01000100 %01000100 %00111100 %00000000 |100 d
%00000000 %00000000 %00111000 %01000100 %01111000 %01000000 %00111100 %00000000 
%00000000 %00001100 %00010000 %00011000 %00010000 %00010000 %00010000 %00000000 
%00000000 %00000000 %00111100 %01000100 %01000100 %00111100 %00000100 %00111000 
%00000000 %01000000 %01000000 %01111000 %01000100 %01000100 %01000100 %00000000 
%00000000 %00010000 %00000000 %00110000 %00010000 %00010000 %00111000 %00000000 | 105 i
%00000000 %00000100 %00000000 %00000100 %00000100 %00000100 %00100100 %00011000 
%00000000 %00100000 %00101000 %00110000 %00110000 %00101000 %00100100 %00000000
%00000000 %00010000 %00010000 %00010000 %00010000 %00010000 %00001100 %00000000 
%00000000 %00000000 %01101000 %01010100 %01010100 %01010100 %01010100 %00000000 
%00000000 %00000000 %01111000 %01000100 %01000100 %01000100 %01000100 %00000000 | 110 n
%00000000 %00000000 %00111000 %01000100 %01000100 %01000100 %00111000 %00000000
%00000000 %00000000 %01111000 %01000100 %01000100 %01111000 %01000000 %01000000 
%00000000 %00000000 %00111100 %01000100 %01000100 %00111100 %00000100 %00000110 
%00000000 %00000000 %00011100 %00100000 %00100000 %00100000 %00100000 %00000000 
%00000000 %00000000 %00111000 %01000000 %00111000 %00000100 %01111000 %00000000 | 115 s
%00000000 %00010000 %00111000 %00010000 %00010000 %00010000 %00001100 %00000000
%00000000 %00000000 %01000100 %01000100 %01000100 %01000100 %00111000 %00000000
%00000000 %00000000 %01000100 %01000100 %00101000 %00101000 %00010000 %00000000
%00000000 %00000000 %01000100 %01010100 %01010100 %01010100 %00101000 %00000000
%00000000 %00000000 %01000100 %00101000 %00010000 %00101000 %01000100 %00000000 | 120 x
%00000000 %00000000 %01000100 %01000100 %01000100 %00111100 %00000100 %00111000 | y
%00000000 %00000000 %01111100 %00001000 %00010000 %00100000 %01111100 %00000000 | z
%00000000 %00001110 %00001000 %00110000 %00001000 %00001000 %00001110 %00000000 | {
%00000000 %00001000 %00001000 %00001000 %00001000 %00001000 %00001000 %00000000 | |
%00000000 %01110000 %00010000 %00001100 %00010000 %00010000 %01110000 %00000000 | 125 }
%00000000 %00010100 %00101000 %00000000 %00000000 %00000000 %00000000 %00000000 ) | ~

#xc #yc
:bat	'yc ! 'xc ! ;
:bc		and? ( "█" .write ; ) 32 .emit ;
	
:bigline | byte --
	$80 ( 1? over bc 2/ ) 2drop ;
	
:bigemit | ascii --
	$7f and 3 << 'font8x8 + >a
	0 ( 8 <?
		xc yc pick2 + .at
		ca@+ bigline
		1+ ) drop 
	8 'xc +! ;
	
:bprint
	( c@+ 1? bigemit ) 2drop ;
	
|------------------ convert data
#fontsx

| $8080 => $c000
:bigline | v -- v
	0 >b
	8 ( 1? 1-
		2dup >> | 0101
		dup $0100 and 7 >> swap $1 and or | 0003
		over 2* << 
		b+
		) drop 
	b> pick2 16 * << a+
	;
		
:conv | v -- vc
	ab[
	0 >a
	0 ( 4 <?
		swap bigline 16 >>> swap
		1+ ) 2drop  
	a> 
	]ba ;
		
:makefit	
	here dup 'fontsx ! >b
	'font8x8 >a
	128 ( 1? 1-
		a@+	conv b!+
		) drop 
	b> 'here ! ;

|-- for diferent sizes utf
#t00 " " #t01 "▀" #t10 "▄" #t11 "█"	
#t 't00 't01 't10 't11
:bc 3 << 't + @ .write ;

|--- 3bytes utf-8 align to 4
#tx " " ( 0 0 ) "▀" "▄" "█"	 | 3bytes utf-char
:bc 2 << 'tx + .write ;
	
:bigline | val -- val
	14 ( 1? 2dup >> $3 and bc 2 - ) drop ;
	
:bigemit | ascii --
	$7f and 3 << fontsx	+ @
	0 ( 4 <?
		xc yc pick2 + .at
		swap bigline 16 >> swap
		1+ ) 2drop 
	8 'xc +! ;

:xprint
	( c@+ 1? bigemit ) 2drop ;
	
:savefit	
	mark
	"#f8x8 " ,print ,cr
	fontsx >a
	0 ( 128 <? 1+
		a@+ "$%h " ,print 
		$3 nand? ( ,cr ) 
		) drop
	"f8x8.r3" savemem
	empty
	;
|--------------- UTF-com
#utfex "
 ─ │
 ┌ ┐ └ ┘
 ├ ┤ ┬ ┴ ┼
 ═ ║ ╔ ╗ ╚ ╝ ╬	
█ ▌ ▀ ▄	
░ ▒ ▓
■ □ ▲ ▼ ● ○ — 
"

:main
	makefit
	.cls
	2 2 bat .green
	"R3forth big" bprint
	2 12 bat .red
	"R3forth text" xprint
	.cr
	.cr
	'utfex .write
	
	.flush
	|savefit | save file with converted data
	waitesc
	;
	
: .console main .free ;